@page "/clientes"

@inherits BaseCrudPageComponent<UsuarioPerfil>

@using Dtos
@using MaterialeShop.Admin.Src.Shared.Components

@inject UsuarioPerfilService UsuarioPerfilService
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar

<PageTitle>MaterialeShop - Clientes</PageTitle>

<AppBarCustom />

<div class="px-2 px-sm-8 px-md-16 pt-6 pt-sm-8 pt-md-8">

    <MudText Typo="Typo.h5">Clientes</MudText>

    <br>

    <MudForm @ref="form" @bind-IsValid="@success" @bind-Errors="@errors" ValidationDelay="0">
        <MudCard Outlined="true">
            <MudCardHeader>
                <CardHeaderContent>
                    <h4>Novo item</h4>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent>
                <div class='d-flex flex-wrap justify-center align-center gap-1' style='width: 100% !important' LINHA>
                    <MudTextField Label="Nome completo" @bind-Value="model.NomeCompleto" For="@(() => model.NomeCompleto)" Required="true"
                        Immediate="true" Variant="Variant.Outlined"/>
                    <MudTextField Label="Email" @bind-Value="model.Email" For="@(() => model.Email)" Required="true"
                        Immediate="true" Variant="Variant.Outlined"/>
                    <MudTextField Label="CPF" @bind-Value="model.Cpf" For="@(() => model.Cpf)" Required="true"
                        Immediate="true" Variant="Variant.Outlined"/>
                    <MudTextField Label="Telefone" @bind-Value="model.Telefone" For="@(() => model.Telefone)" Required="true"
                        Immediate="true" Variant="Variant.Outlined"/>
                    <MudTextField Label="Uuid" @bind-Value="model.Uuid" For="@(() => model.Uuid)" Required="true"
                        Immediate="true" Variant="Variant.Outlined"/>
                </div>



            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Disabled="@(!success)" Class="ml-auto"
                    OnClick="OnClickSave">
                    @if (_processingNewItem)
                    {
                        <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                        <MudText Class="ms-2">Processando</MudText>
                    }
                    else
                    {
                        <MudText>Salvar</MudText>
                    }
                </MudButton>
            </MudCardActions>

        </MudCard>
    </MudForm>

    <br>


    @if (_tableListFiltered == null)
    {
        <MudSimpleTable>
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <MudSkeleton />
                    </td>
                    <td>
                        <MudSkeleton />
                    </td>
                </tr>
            </tbody>
        </MudSimpleTable>
    }
    else if (_tableListFiltered.Count == 0)
    {
        <MudContainer>
            <br>
            <br>
            <br>
            <h2 style="text-align: center !important;">Você não tem nenhuma item nesta página.</h2>
        </MudContainer>
    }
    else
    {
        <MudTable Items="@_tableListFiltered" @ref="table" Elevation="1" Bordered="false" Striped="true" Hover="true"
        SortLabel="Ordenar por" T="UsuarioPerfil">
            <HeaderContent>
                <MudTh>
                    Título
                </MudTh>
                <MudTh>
                    Nome completo
                </MudTh>
                <MudTh>
                    CPF
                </MudTh>
                <MudTh>
                    Telefone
                </MudTh>
                <MudTh>
                    Ações
                </MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Título">@context?.Email</MudTd>
                <MudTd DataLabel="NomeCompleto">@context?.NomeCompleto</MudTd>
                <MudTd DataLabel="NomeCompleto">@context?.Cpf</MudTd>
                <MudTd DataLabel="NomeCompleto">@context?.Telefone</MudTd>
                <MudTd> botao </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager PageSizeOptions="new int[]{50, 100}" />
            </PagerContent>
        </MudTable>
    }

    <br>
    <br>
    <br>
    <br>
    <br>

</div>